# Application Configuration
NODE_ENV=development
PORT=3000
APP_NAME=service-acl

# Database Configuration
DATABASE_URL="postgresql://username:password@localhost:5432/acl_db?schema=public"

# Logging Configuration
LOG_LEVEL=info
LOG_PRETTY=true

# Security Configuration
JWT_SECRET=your-super-secret-jwt-key-here
API_KEY_SECRET=your-api-key-secret-here

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Platform Configuration
HOTMART_API_BASE_URL=https://developers.hotmart.com
NUVEMSHOP_API_BASE_URL=https://api.tiendanube.com
WOOCOMMERCE_API_BASE_URL=

# Platform Webhook Secrets
HOTMART_WEBHOOK_SECRET=your-hotmart-webhook-secret
NUVEMSHOP_WEBHOOK_SECRET=your-nuvemshop-webhook-secret
WOOCOMMERCE_WEBHOOK_SECRET=your-woocommerce-webhook-secret

# Webhook System Configuration
WEBHOOK_ENABLED=true
WEBHOOK_MAX_BODY_SIZE=1048576
WEBHOOK_TIMEOUT=30000
WEBHOOK_RATE_LIMIT_ENABLED=true
WEBHOOK_RETRY_ENABLED=true
WEBHOOK_MAX_RETRIES=3
WEBHOOK_RETRY_BASE_DELAY=1000
WEBHOOK_RETRY_MAX_DELAY=300000
WEBHOOK_RETRY_MULTIPLIER=2
WEBHOOK_QUEUE_BATCH_SIZE=10
WEBHOOK_PROCESSING_TIMEOUT=30000
WEBHOOK_CLEANUP_INTERVAL=300000
WEBHOOK_CONFLICT_RESOLUTION=TIMESTAMP_WINS

# Platform-Specific Rate Limits
HOTMART_RATE_LIMIT_PER_MINUTE=100
HOTMART_RATE_LIMIT_PER_HOUR=1000
HOTMART_BURST_LIMIT=20
HOTMART_RETRY_AFTER=60000

NUVEMSHOP_RATE_LIMIT_PER_MINUTE=60
NUVEMSHOP_RATE_LIMIT_PER_HOUR=1000
NUVEMSHOP_BURST_LIMIT=15
NUVEMSHOP_RETRY_AFTER=60000

WOOCOMMERCE_RATE_LIMIT_PER_MINUTE=120
WOOCOMMERCE_RATE_LIMIT_PER_HOUR=2000
WOOCOMMERCE_BURST_LIMIT=25
WOOCOMMERCE_RETRY_AFTER=30000

# Platform Priorities (for conflict resolution)
PLATFORM_PRIORITY_WOOCOMMERCE=3
PLATFORM_PRIORITY_NUVEMSHOP=2
PLATFORM_PRIORITY_HOTMART=1

# Redis Configuration (for event queue and rate limiting)
REDIS_URL=redis://localhost:6379

# Monitoring
ENABLE_METRICS=true
METRICS_PORT=9090

# =============================================================================
# Webhook Configuration Notes
# =============================================================================

# Webhook URLs (configure these in your platforms):
# Hotmart: https://your-domain.com/api/acl/webhooks/hotmart
# Nuvemshop: https://your-domain.com/api/acl/webhooks/nuvemshop
# WooCommerce: https://your-domain.com/api/acl/webhooks/woocommerce

# Authentication Methods:
# Hotmart: Uses HOTTOK in X-Hotmart-Hottok header
# Nuvemshop: Uses HMAC-SHA256 in X-Linkedstore-Hmac-Sha256 header
# WooCommerce: Uses HMAC-SHA256 in X-WC-Webhook-Signature header

# Conflict Resolution Strategies:
# TIMESTAMP_WINS: Most recent update wins
# PLATFORM_PRIORITY: Platform with highest priority wins
# MERGE_FIELDS: Merge fields based on predefined rules
# MANUAL_REVIEW: Flag conflicts for manual resolution

# For detailed setup instructions, see:
# docs/webhooks/README.md
# docs/webhooks/platforms/hotmart.md
# docs/webhooks/platforms/nuvemshop.md
# docs/webhooks/platforms/woocommerce.md
